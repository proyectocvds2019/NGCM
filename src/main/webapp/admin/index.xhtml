<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
	<link rel="stylesheet" type="text/css" href="../css/plugins/bootstrap.min.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="../css/plugins/bootstrap-theme.min.css" media="screen"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"/>
    
    <link rel="stylesheet" type="text/css" href="../css/admin.css" media="screen"/>
    
    
    <!-- JS plugins -->
    <script src="../js/plugins/bootstrap.min.js"></script>

	
</h:head>
<h:body>
	<div class="container">
		<div class="col-xs-12">
			<h1 class="titulo col-xs-12">Historial de Laboratorios</h1>
			<h:outputLabel class="titulo tituloNombre col-xs-9">Bienvenido: <h:outputText value="#{sessionScope.correo}"/></h:outputLabel>
			<img class="img img-responsive col-xs-3" src="https://www.escuelaing.edu.co/uploads/descargables/1110_logotipo_institucional_vm300px.png"/>
		</div>
		<div class="col-xs-12">
			<nav class="navbar navbar-inverse">
				<div class="container-fluid">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-target="#myNavbar">
							<span class="icon-bar"></span>
					        <span class="icon-bar"></span>
					        <span class="icon-bar"></span> 
						</button>
					</div>
					<div class="collapse navbar-collapse" id="myNavbar">
						<ul class="nav navbar-nav">
							<li id="botonRegistrarElemento" data-toggle="collapse" data-target="#registrarElemento" class="active botonMenu"><a href="#">Elementos</a></li>

							<li id="botonRegistrarEquipo" data-toggle="collapse" data-target="#registrarEquipo" class="botonMenu"><a href="#">Equipos</a></li>



						</ul>
						<ul class="nav navbar-nav navbar-right">
					        <li> <h:outputLink style="display: inline-block;" value="/logout"><span class=""></span>Salir <i style="color: gray; display: inline-block;" class="fas fa-sign-out-alt"></i></h:outputLink></li>
					      </ul>


					</div>
				</div>
			</nav>
		</div>
	</div>
	<div class="container collapse in" id="registrarElemento">
		<h1>Registrar Elemento</h1>
		<hr/>
		<div class="row col-xs-12">
			<h:form>
			    <p:messages>
			        <p:autoUpdate />
			    </p:messages>
			 
			    <h:panelGrid class="col-xs-12" columns="2" cellpadding="5">
					<p:outputLabel for="idElemento" value="Id del elemento:"/>
					<p:inputText required="true" id="idElemento" value="#{adminBean.idElemento}"/>

					<p:outputLabel for="nombreElemento" value="Nombre del elemento:" />
					<p:inputText required="true" id="nombreElemento" value="#{adminBean.nombreElemento}"/>

			        <p:outputLabel for="tipoElemento" value="Tipo de elemento:" />

					<h:selectOneMenu required="true" id="tipoElemento" value="#{adminBean.tipoSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.tipoElementos}"/>
	                </h:selectOneMenu>
			       	
	
			       <p:outputLabel for="Equipo" value="Equipo:" />
			       <h:selectOneMenu required="true" id="Equipo" value="#{adminBean.equipo}" style="width:196px">
			       		<f:selectItem itemLabel="NULL" itemValue="-1"/>
	                    <f:selectItems value="#{adminBean.getEquiposSelectItem()}"/>
	                </h:selectOneMenu>

			 
			    </h:panelGrid>
			 
			    <p:commandButton action="#{adminBean.registrarElemento()}" icon="fa fa-check" class="btn btn-default btn-success" value="Registrar" />


			</h:form>
			<p:ajaxStatus onstart="PF('cargando').show()" onsuccess="PF('cargando').hide()" />
			<p:dialog widgetVar="cargando" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
				<img class="img-responsive img-thumbnail" src="/img/cargando.gif" alt="" style="width:100%;height:50%"/>
			</p:dialog>
			<hr/>
		</div>
		<div class="row col-xs-12">
			<div class="col-md-12 col-xs-12">
				<h:form id="formElementos">
					<p:fieldset id="tablaElementos" legend="Tabla de elementos">
						<p:dialog widgetVar="cargando2" modal="false" draggable="false" closable="false" resizable="false" showHeader="false">
							<img class="img-responsive" src="/img/cargando2.gif" alt="" style="width:70px;height:70px"/>
						</p:dialog>
				        <p:dataTable id="elementos" var="elemento" value="#{adminBean.consultarElementos()}" rows="10" paginator="true"
									 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}">

				            <p:column headerText="Id">
				                <h:outputText value="#{elemento.id}" />
				            </p:column>
							<p:column headerText="Nombre">
								<h:outputText value="#{elemento.nombre}" />
							</p:column>
				            <p:column headerText="Tipo">
				                <h:outputText value="#{elemento.tipo}" />
				            </p:column>
							<p:column headerText="Equipo">
								<h:outputText value="#{adminBean.consultarEquipoDeElemento(elemento)}"/>
							</p:column>
							<p:column headerText="Activo">
								<h:outputText value="#{elemento.activo}"/>
							</p:column>

							<p:column headerText="Eliminar">
								<center>
									<h:commandButton action="#{adminBean.eliminarElemento(elemento)}" class="btn btn-default btn-danger" value="ELIMINAR"/>
								</center>
							</p:column>
				        </p:dataTable>
				    </p:fieldset>
				</h:form>
				<hr/>
			</div>
		</div>
		<div class="row col-xs-12">
			<div class="col-md-12 col-xs-12">
				<h:form id="formElementosDisponibles">
					<p:fieldset id="tablaElementosDisponibles" legend="Tabla de elementos disponibles">
				        <p:dataTable id="elementos" var="elemento" value="#{adminBean.consultarElementosDisponibles()}" rows="10" paginator="true"
									 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}">
				 
				            <p:column headerText="Id">
				                <h:outputText value="#{elemento.id}" />
				            </p:column>

							<p:column headerText="Nombre">
								<h:outputText value="#{elemento.nombre}" />
							</p:column>
				 
				            <p:column headerText="Tipo">
				                <h:outputText value="#{elemento.tipo}" />
				            </p:column>
							<p:column headerText="Enlazar">
								<center>
									<button data-toggle="modal" data-target="#botonEnlazarEquipo#{elemento.id}" type="button" class="btn btn-default btn-responsive btn-primary"><i class="fas fa-star"></i>Enlazar equipo</button>
								</center>
								<div class="modal fade" id="botonEnlazarEquipo#{elemento.id}" role="dialog">
									<div class="modal-dialog">

										<!-- Modal content-->
										<div class="modal-content">
											<div class="modal-header">

												<h4 class="modal-title">Enlazar equipo al elemento</h4>
											</div>
											<div class="modal-body">
												<h:form class="container-fluid" id="formularioEnlazarElemento#{elemento.id}">
													<p:messages>
														<p:autoUpdate />
													</p:messages>
													<div class="row" style="padding:25px;">
														<p:outputLabel class="col-xs-12 col-md-6" value="Elemento"/>
														<input type="text" class="col-xs-12 col-md-6" value="#{elemento.id}" disabled="disabled"/>
														<hr/>
														<p:outputLabel class="col-xs-12 col-md-6" value="Seleccionar Equipo"/>
														<h:selectOneMenu style="" dynamic="true" class="col-xs-12 col-md-6" id="equipoAsociar#{elemento.id}" value="#{adminBean.equipo}">
															<f:selectItems value="#{adminBean.getEquiposDisponiblesParaElemento(elemento)}"/>
														</h:selectOneMenu>
														<hr class="col-xs-11"/>
														<h:commandButton  action="#{adminBean.enlazarElemento(elemento)}" class="btn btn-default btn-success btn-responsive col-xs-12 col-md-12" value="Enlazar" />
													</div>
												</h:form>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
											</div>
										</div>

									</div>
								</div>
							</p:column>
				        </p:dataTable>
				    </p:fieldset>
				</h:form>
			</div>
		</div>
	</div>

	<div class="container col-xs-12 collapse" id="registrarEquipo">
		<div class="container">

			<h:form>
				<p:messages>
			        <p:autoUpdate />
			    </p:messages>

			    <h:panelGrid class="col-xs-12" columns="2" cellpadding="5">
			    	<p:outputLabel for="laboratorio" value="Laboratorio:" />
			    	<h:selectOneMenu id="laboratorio" value="#{adminBean.laboratorioSeleccionado}" style="width:196px">
			    	<f:selectItem itemLabel="NULL" itemValue="null"/>
	                    <f:selectItems  value="#{adminBean.laboratoriosDisponibles()}" var="laboratorio" itemLabel="#{laboratorio.nombre}" itemValue="#{laboratorio.id}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="monitor" value="Monitor:" />
			    	<h:selectOneMenu id="monitor" value="#{adminBean.monitorSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.monitoresDisponibles()}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="mouse" value="Mouse:" />
			    	<h:selectOneMenu id="mouse" value="#{adminBean.mouseSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.mousesDisponibles()}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="torre" value="Torre:" />
			    	<h:selectOneMenu id="torre" value="#{adminBean.tecladoSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.torresDisponibles()}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="teclado" value="Teclado:" />
			    	<h:selectOneMenu id="teclado" value="#{adminBean.tecladoSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.tecladosDisponibles()}"/>
	                </h:selectOneMenu>
				</h:panelGrid>

				<p:commandButton  action="#{adminBean.registrarEquipo()}" icon="fa fa-check" class="btn btn-default btn-success" value="Registrar" />
				<p:ajaxStatus onstart="PF('cargando').show()" onsuccess="PF('cargando').hide()" />
				<p:dialog widgetVar="cargando" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
					<img class="img-responsive img-thumbnail" src="/img/cargando.gif" alt="" style="width:100%;height:50%"/>
				</p:dialog>
			</h:form>
			<hr/>
		</div>
		<div class="container">
			<h:form id="formEquipos">
				<p:fieldset id="tablaEquipos" legend="Tabla de equipos">
					<p:dialog widgetVar="cargando2" modal="false" draggable="false" closable="false" resizable="false" showHeader="false">
						<img class="img-responsive" src="/img/cargando2.gif" alt="" style="width:70px;height:70px"/>
					</p:dialog>
					<p:dataTable id="equipos" var="equipo" value="#{adminBean.getEquipos()}" rows="10" paginator="true"
								 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}">

						<p:column headerText="Id">
							<h:outputText value="#{equipo.id}"/>
						</p:column>
						<p:column headerText="Activo">
							<h:outputText value="#{equipo.activo}" />
						</p:column>
						<p:column headerText="Laboratorio">
							<h:outputText value="#{equipo.laboratorio.nombre}" />
							<button type="button" data-toggle="modal" data-target="#cambiarLaboratorioModal#{equipo.id}" class="btn btn-default btn-info btn-block col-xs-12">Cambiar</button>
							<div class="modal fade" id="cambiarLaboratorioModal#{equipo.id}" role="dialog">
								<div class="modal-dialog">

									<!-- Modal content-->
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">CAMBIAR LABORATORIO</h4>
										</div>
										<div class="modal-body">
                                            <h:form>
                                                <div class="form-group">
                                                    <p:outputLabel for="nuevoLaboratorio" value="Seleccione el nuevo laboratorio:"/>
                                                    <h:selectOneMenu id="nuevoLaboratorio" value="#{adminBean.laboratorioSeleccionado}">
                                                        <f:selectItems var="laboratorio" value="#{adminBean.laboratoriosDisponibles()}" itemLabel="#{laboratorio.nombre}" itemValue="#{laboratorio.id}" />
                                                    </h:selectOneMenu>
                                                </div>
                                                <h:commandButton class="btn btn-default btn-success btn-block" value="Cambiar" type="button" action="#{adminBean.actualizarLaboratorioDeEquipo(equipo)}" />
                                            </h:form>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
										</div>
									</div>

								</div>
							</div>
						</p:column>

						<p:column headerText="Teclado">
							<h:outputText value="#{adminBean.consultarElementoDelEquipo(TipoElemento.TECLADO,equipo)}"/>
							<button data-toggle="modal" data-target="#cambiarTeclado#{equipo.id}" type="button" class="btn btn-default btn-info btn-block col-xs-12">Cambiar</button>
							<div class="modal fade" id="cambiarTeclado#{equipo.id}" role="dialog">
								<div class="modal-dialog">

									<!-- Modal content-->
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">CAMBIAR TECLADO</h4>
										</div>
										<div class="modal-body">
                                            <div class="form-group">
                                                <h:outputLabel for="cambiarTeclado" value="Seleccione el nuevo teclado:"/>
                                                <h:selectOneMenu id="cambiarTeclado" value="#{adminBean.tecladoSeleccionado}">
                                                    <f:selectItems var="teclado" value="#{adminBean.consultarElementosDisponibles(TipoElemento.TECLADO)}" itemLabel="#{teclado.id}" itemValue="#{teclado.id}"/>
                                                </h:selectOneMenu>
                                            </div>
                                            <h:commandButton value="Cambiar" class="btn btn-default btn-success btn-block" action="#{adminBean.actualizarTecladoDeEquipo(equipo)}"/>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
										</div>
									</div>

								</div>
							</div>
						</p:column>
						<p:column headerText="Torre">
							<h:outputText value="#{adminBean.consultarElementoDelEquipo(TipoElemento.TORRE,equipo)}"/>
							<button data-toggle="modal" data-target="#cambiarTorre#{equipo.id}" type="button" class="btn btn-default btn-info btn-block col-xs-12">Cambiar</button>
							<div class="modal fade" id="cambiarTorre#{equipo.id}" role="dialog">
								<div class="modal-dialog">

									<!-- Modal content-->
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">CAMBIAR TORRE</h4>
										</div>
										<div class="modal-body">
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <h:outputLabel for="cambiarTorre" value="Seleccione el nueva Torre:"/>
                                                    <h:selectOneMenu id="cambiarTorre" value="#{adminBean.torreSeleccionada}">
                                                        <f:selectItems var="torre" value="#{adminBean.consultarElementosDisponibles(TipoElemento.TORRE)}" itemLabel="#{torre.id}" itemValue="#{torre.id}"/>
                                                    </h:selectOneMenu>
                                                </div>
                                                <h:commandButton value="Cambiar" class="btn btn-default btn-success btn-block" action="#{adminBean.actualizarTorreDeEquipo(equipo)}"/>
                                            </div>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
										</div>
									</div>

								</div>
							</div>
						</p:column>
						<p:column headerText="Mouse">
							<h:outputText value="#{adminBean.consultarElementoDelEquipo(TipoElemento.MOUSE,equipo)}"/>
							<button data-toggle="modal" data-target="#cambiarMouse#{equipo.id}" type="button" class="btn btn-default btn-info col-xs-12">Cambiar</button>
							<div class="modal fade" id="cambiarMouse#{equipo.id}" role="dialog">
								<div class="modal-dialog">

									<!-- Modal content-->
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">CAMBIAR MOUSE</h4>
										</div>
										<div class="modal-body">
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <h:outputLabel for="cambiarMouse" value="Seleccione el nuevo mouse:"/>
                                                    <h:selectOneMenu id="cambiarMouse" value="#{adminBean.mouseSeleccionado}">
                                                        <f:selectItems var="mouse" value="#{adminBean.consultarElementosDisponibles(TipoElemento.MOUSE)}" itemLabel="#{mouse.id}" itemValue="#{mouse.id}"/>
                                                    </h:selectOneMenu>
                                                </div>
                                                <h:commandButton value="Cambiar" class="btn btn-default btn-success btn-block" action="#{adminBean.actualizarMouseDeEquipo(equipo)}"/>
                                            </div>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
										</div>
									</div>

								</div>
							</div>
						</p:column>
						<p:column headerText="Monitor">
							<h:outputText class="col-xs-12" value="#{adminBean.consultarElementoDelEquipo(TipoElemento.MONITOR,equipo)}"/>
							<button data-toggle="modal" data-target="#cambiarMonitor#{equipo.id}" type="button" class="btn btn-default btn-info btn-block col-xs-12">Cambiar</button>
							<div class="modal fade" id="cambiarMonitor#{equipo.id}" role="dialog">
								<div class="modal-dialog">

									<!-- Modal content-->
									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">CAMBIAR MONITOR</h4>
										</div>
										<div class="modal-body">
                                            <div class="modal-body">
                                                <div class="form-group">
                                                    <h:outputLabel for="cambiarMonitor" value="Seleccione el nuevo Monitor:"/>
                                                    <h:selectOneMenu id="cambiarMonitor" value="#{adminBean.monitorSeleccionado}">
                                                        <f:selectItems var="monitor" value="#{adminBean.consultarElementosDisponibles(TipoElemento.MONITOR)}" itemLabel="#{monitor.id}" itemValue="#{monitor.id}"/>
                                                    </h:selectOneMenu>
                                                </div>
                                                <h:commandButton value="Cambiar" class="btn btn-default btn-success btn-block" action="#{adminBean.actualizarMonitorDeEquipo(equipo)}"/>
                                            </div>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
										</div>
									</div>

								</div>
							</div>
						</p:column>

						<p:column headerText="Eliminar">
							<center>
								<h:commandButton action="#{adminBean.eliminarEquipo(equipo)}" class="btn btn-default btn-danger" value="ELIMINAR"/>
							</center>

						</p:column>
					</p:dataTable>
				</p:fieldset>
			</h:form>
		</div>
	</div>


</h:body>
<footer>

</footer>


<!--JS personalizados -->
<script src="../js/admin.js"></script>
</html>