
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:e="http://java.sun.com/jsf/ext"
    xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:head>
	<link rel="stylesheet" type="text/css" href="../css/plugins/bootstrap.min.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="../css/plugins/bootstrap-theme.min.css" media="screen"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"/>
    
    <link rel="stylesheet" type="text/css" href="../css/admin.css" media="screen"/>
    
    
    <!-- JS plugins -->
    <script src="../js/plugins/bootstrap.min.js"></script>
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.min.js"/>
	
</h:head>
<h:body>
	<div class="container">
		<div class="header container-fluid">
			<div class="row col-xs-12 col-md-6">
				<h1 class="titulo col-xs-12">Historial de Laboratorios</h1>
				<h:outputLabel class="titulo tituloNombre col-xs-12">Bienvenido: <h:outputText value="#{sessionScope.correo}"/></h:outputLabel>

			</div>
			<div class="row col-xs-12 col-md-6" id="divLogo">
				<img id="logo" class="img img-responsive" src="https://www.escuelaing.edu.co/uploads/descargables/1110_logotipo_institucional_vm300px.png"/>
			</div>
		</div>
		<div class="row col-xs-12">
			<nav class="navbar navbar-inverse">
				<div class="container-fluid">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-target="#myNavbar">
							<span class="icon-bar"></span>
					        <span class="icon-bar"></span>
					        <span class="icon-bar"></span> 
						</button>
					</div>
					<div class="collapse navbar-collapse" id="myNavbar">
						<ul class="nav navbar-nav">
							<li id="botonElementos" data-toggle="collapse" data-target="#elementos" class="active botonMenu"><a href="#">Elementos</a></li>

							<li id="botonEquipos" data-toggle="collapse" data-target="#equipos" class="botonMenu"><a href="#">Equipos</a></li>

							<li id="botonLboratorios" data-toggle="collapse" data-target="#laboratorios" class="botonMenu"><a href="#">Laboratorios</a></li>

							<li id="botonNovedades" data-toggle="collapse" data-target="#novedades" class="botonMenu"><a href="#">Novedades</a></li>



						</ul>
						<ul class="nav navbar-nav navbar-right">
					        <li> <h:outputLink style="display: inline-block;" value="/logout"><span class=""></span>Salir <i style="color: gray; display: inline-block;" class="fas fa-sign-out-alt"></i></h:outputLink></li>
					      </ul>


					</div>
				</div>
			</nav>
		</div>
	</div>

	<div class="container collapse in" id="elementos">
		<div class="row col-xs-12">
			<h1>Registrar Elemento</h1>
			<hr/>
			<h:form>
			 
			    <h:panelGrid class="col-xs-12" columns="2" cellpadding="5">
					<p:outputLabel for="idElemento" value="Id del elemento:"/>
					<p:inputText required="true" id="idElemento" value="#{adminBean.idElemento}"/>

					<p:outputLabel for="nombreElemento" value="Nombre del elemento:" />
					<p:inputText required="true" id="nombreElemento" value="#{adminBean.nombreElemento}"/>

			        <p:outputLabel for="tipoElemento" value="Tipo de elemento:" />

					<h:selectOneMenu required="true" id="tipoElemento" value="#{adminBean.tipoSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.tipoElementos}"/>
	                </h:selectOneMenu>
			       	
	
			       <p:outputLabel for="Equipo" value="Equipo:" />
			       <h:selectOneMenu required="true" id="Equipo" value="#{adminBean.equipo}" style="width:196px">
			       		<f:selectItem itemLabel="NULL" itemValue="-1"/>
	                    <f:selectItems value="#{adminBean.listaEquiposActivos}" itemValue="#{equipo.id}" var="equipo" itemLabel="Sistemas#{equipo.id}"/>
	                </h:selectOneMenu>

			 
			    </h:panelGrid>
			    <p:commandButton ajax="true" onsuccess="mensajeCorrecto('El elemento se ha registrado!')" onerror="mensajeError('No se ha podido registrar el elemento!')" id="botonRegistrarElemento" process="@form" action="#{adminBean.registrarElemento()}" icon="fa fa-check" styleClass="btn btn-default btn-success" value="Registrar" >
					<f:ajax  onevent="comprobar"/>
				</p:commandButton>
				

			</h:form>
			
			<hr/>
		</div>
		<div class="row col-xs-12">
			<div class="col-md-12 col-xs-12">
				<h:form>
					<p:fieldset id="tablaElementos" legend="Tabla de elementos">
				        <p:dataTable paginator="true"
									 rows="10"
									 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}"
									 rowKey="#{elemento.id}"
									 selection="#{adminBean.listaElementosSeleccionados}"
									 id="elementosT"
									 var="elemento"
									 value="#{adminBean.listaElementos}"
									 >
							<p:column selectionMode="multiple" style="text-align: center;"/>
				            <p:column sortBy="#{elemento.id}" filterBy="#{elemento.id}" headerText="Id">
				                <h:outputText value="#{elemento.id}" />
				            </p:column>
							<p:column sortBy="#{elemento.nombre}" filterBy="#{elemento.nombre}" headerText="Nombre">
								<h:outputText value="#{elemento.nombre}" />
							</p:column>
				            <p:column sortBy="#{elemento.tipo}" filterBy="#{elemento.tipo}" headerText="Tipo">
				                <h:outputText value="#{elemento.tipo}" />
				            </p:column>
							<p:column sortBy="#{adminBean.consultarEquipoDeElemento(elemento)}" filterBy="#{adminBean.consultarEquipoDeElemento(elemento)}" headerText="Equipo">
								<h:outputText value="#{adminBean.consultarEquipoDeElemento(elemento)}"/>
							</p:column>
							<p:column sortBy="#{elemento.activo}" filterBy="#{elemento.activo}" headerText="Activo">
								<h:outputText value="#{elemento.activo}"/>
							</p:column>

							<p:column headerText="Novedades">
								<center>
									<button type="button" class="btn btn-default btn-block btn-info" data-target="#novedadElemento#{elemento.id}" data-toggle="modal">
										VER
									</button>
								</center>
							</p:column>
							<p:column headerText="Configurar">
								<center>
									<h:form>
										<button type="button" class="btn btn-default btn-block btn-info" data-target="#configurarElementoModal#{elemento.id}" data-toggle="modal">
											<i class="fas fa-wrench"></i>
										</button>
									</h:form>
								</center>
							</p:column>
							<f:facet name="footer">
								<button type="button" data-toggle="modal" data-target="#modalConfirmacion" class="btn btn-default btn-danger">
										Eliminar
								</button>

								<div class="modal fade" id="modalConfirmacion" role="dialog">
									<div class="modal-dialog">

										<!-- Modal content-->
										<div class="modal-content">
											<div class="modal-header">
												<button type="button" class="close" data-dismiss="modal">X</button>
												<h4 class="modal-title">Confirmación</h4>
											</div>
											<div class="modal-body">
												<p>¿Quiere dar de baja los elementos seleccionados?.</p>
												<p:commandButton onsuccess="mensajeCorrecto('los elementos se han dado de baja correctamente')" onerror="mensajeError('No se puede realizar la solicitud!')" action="#{adminBean.eliminarElementos()}" process="elementosT" value="SI" styleClass="btn btn-default btn-success">
													<f:ajax onevent="comprobar"/>
												</p:commandButton>
												<button type="button" class="btn btn-default btn-danger" data-dismiss="modal">NO</button>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
											</div>
										</div>

									</div>
								</div>
								<h:commandLink style="float: right; color:white;" value="Recargar" action="#{adminBean.recargar()}" styleClass="btn btn-default btn-info" />
							</f:facet>
				        </p:dataTable>
				    </p:fieldset>
				</h:form>
				<h:form>
					<i class="fas fa-download"></i>
					 <h:commandButton action="#{adminBean.exportarElementos()}" value="Descargar" styleClass="btn btn-default" >
					</h:commandButton>
				</h:form>

				<hr/>
			</div>
		</div>
		<div class="row col-xs-12">
			<div class="col-md-12 col-xs-12">
				<h:form id="formElementosDisponibles">
					<p:fieldset id="tablaElementosDisponibles" legend="Tabla de elementos disponibles">
				        <p:dataTable id="elementosTabla" var="elemento" value="#{adminBean.listaElementosDisponibles}" rows="10" paginator="true"
									 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}">
				 
				            <p:column sortBy="#{elemento.id}" filterBy="#{elemento.id}" headerText="Id">
				                <h:outputText value="#{elemento.id}" />
				            </p:column>

							<p:column sortBy="#{elemento.nombre}" filterBy="#{elemento.nombre}" headerText="Nombre">
								<h:outputText value="#{elemento.nombre}" />
							</p:column>
				 
				            <p:column sortBy="#{elemento.tipo}" filterBy="#{elemento.tipo}" headerText="Tipo">
				                <h:outputText value="#{elemento.tipo}" />
				            </p:column>
							<p:column headerText="Enlazar">
								<center>
									<button data-toggle="modal" data-target="#botonEnlazarEquipoModal#{elemento.id}" type="button" class="btn btn-default btn-responsive btn-primary"><i class="fas fa-star"></i>Enlazar equipo</button>
								</center>



								
							</p:column>
							<f:facet name="footer">
								<h:commandLink style="color:white;" value="Recargar" action="#{adminBean.recargar()}" styleClass="btn btn-default btn-info" />
							</f:facet>
				        </p:dataTable>
				    </p:fieldset>
				</h:form>
			</div>
		</div>
	</div>

	<div class="container col-xs-12 collapse" id="equipos">
		<div class="container">

			<h:form>
				<h1>Registrar Equipo</h1>

			    <h:panelGrid class="col-xs-12" columns="2" cellpadding="5">
			    	<p:outputLabel for="laboratorio" value="Laboratorio:" />
			    	<h:selectOneMenu id="laboratorio" value="#{adminBean.laboratorioSeleccionado}" style="width:196px">
			    	<f:selectItem itemLabel="NULL" itemValue="-1"/>
	                    <f:selectItems  value="#{adminBean.laboratoriosDisponibles()}" var="laboratorio" itemLabel="#{laboratorio.nombre}" itemValue="#{laboratorio.id}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="monitor" value="Monitor:" />
			    	<h:selectOneMenu id="monitor" value="#{adminBean.monitorSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.monitoresDisponibles()}" var="monitor" itemLabel="#{monitor.nombre}" itemValue="#{monitor.id}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="mouse" value="Mouse:" />
			    	<h:selectOneMenu id="mouse" value="#{adminBean.mouseSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.mousesDisponibles()}" var="mouse" itemLabel="#{mouse.nombre}" itemValue="#{mouse.id}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="torre" value="Torre:" />
			    	<h:selectOneMenu id="torre" value="#{adminBean.torreSeleccionada}" style="width:196px">
	                    <f:selectItems value="#{adminBean.torresDisponibles()}" var="torre" itemValue="#{torre.id}" itemLabel="#{torre.nombre}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="teclado" value="Teclado:" />
			    	<h:selectOneMenu id="teclado" value="#{adminBean.tecladoSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.tecladosDisponibles()}" var="teclado" itemLabel="#{teclado.nombre}" itemValue="#{teclado.id}"/>
	                </h:selectOneMenu>
				</h:panelGrid>

				<p:commandButton ajax="true" onsuccess="mensajeCorrecto('El elemento se ha registrado!')" onerror="mensajeError('No se ha podido registrar el elemento!')" action="#{adminBean.registrarEquipo()}" icon="fa fa-check" class="btn btn-default btn-success" value="Registrar" >
					<f:ajax  onevent="comprobar"/>
				</p:commandButton>
			</h:form>
			<hr/>
		</div>
		<div class="container">
			<h:form id="formEquipos">
				<p:fieldset id="tablaEquipos" legend="Tabla de equipos">
					<p:dataTable rowKey="#{equipo.id}" selection="#{adminBean.equiposSeleccionados}" id="equiposTabla" var="equipo" value="#{adminBean.listaEquipos}" rows="10" paginator="true"
								 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}">
						<p:column selectionMode="multiple" style="text-align: center;">
						</p:column>
						<p:column sortBy="#{equipo.id}" filterBy="#{equipo.id}" headerText="Id">
							<h:outputText value="#{equipo.id}"/>
						</p:column>
						<p:column headerText="Nombre">
							<h:outputText value="Sistemas#{equipo.id}"/>
						</p:column>
						<p:column sortBy="#{equipo.activo}" filterBy="#{equipo.activo}" headerText="Activo">
							<h:outputText value="#{equipo.activo}" />
						</p:column>
						<p:column sortBy="#{adminBean.consultarLaboratorio(equipo).id}" filterBy="#{adminBean.consultarLaboratorio(equipo).id}" headerText="Laboratorio">
							<h:outputText value="#{adminBean.consultarLaboratorio(equipo).nombre}" />
						</p:column>

						<p:column sortBy="#{adminBean.consultarElementoDelEquipo(adminBean.teclado,equipo)}" filterBy="#{adminBean.consultarElementoDelEquipo(adminBean.teclado,equipo)}" headerText="Teclado">
							<h:outputText value="#{adminBean.consultarElementoDelEquipo(adminBean.teclado,equipo)}"/>

						</p:column>
						<p:column sortBy="#{adminBean.consultarElementoDelEquipo(adminBean.torre,equipo)}" filterBy="#{adminBean.consultarElementoDelEquipo(adminBean.torre,equipo)}" headerText="Torre">
							<h:outputText value="#{adminBean.consultarElementoDelEquipo(adminBean.torre,equipo)}"/>

						</p:column>
						<p:column sortBy="#{adminBean.consultarElementoDelEquipo(adminBean.mouse,equipo)}" filterBy="#{adminBean.consultarElementoDelEquipo(adminBean.mouse,equipo)}" headerText="Mouse">
							<h:outputText value="#{adminBean.consultarElementoDelEquipo(adminBean.mouse,equipo)}"/>

						</p:column>
						<p:column sortBy="#{adminBean.consultarElementoDelEquipo(adminBean.monitor,equipo)}" filterBy="#{adminBean.consultarElementoDelEquipo(adminBean.monitor,equipo)}" headerText="Monitor">
							<h:outputText class="col-xs-12" value="#{adminBean.consultarElementoDelEquipo(adminBean.monitor,equipo)}"/>

						</p:column>

						<p:column headerText="Novedades">
							<center>
								<button style="padding:5px;" type="button" data-toggle="modal" data-target="#novedadEquipo#{equipo.id}" class="btn btn-block btn-default btn-info col-xs-12">VER</button>
							</center>
						</p:column>
						<p:column headerText="Configurar">
							<center>
								<button type="button" data-toggle="modal" data-target="#configurarEquipo#{equipo.id}" class="btn btn-default btn-info">
									<i class="fas fa-wrench"></i>
								</button>
							</center>
						</p:column>
						<f:facet name="footer">
							<button class="btn btn-default btn-danger" type="button" data-target="#eliminarEquipos" data-toggle="modal">
								Eliminar
							</button>
							<div class="modal fade" id="eliminarEquipos" role="dialog">
								<div class="modal-dialog">

									<c:set scope="request" var="listaEquiposSeleccionados" property="x" value="#{adminBean.equiposSeleccionados}"/>

									<c:if test="#{adminBean.equiposSeleccionados.size()!=1}">
										<!-- Modal content-->
										<div class="modal-content">
											<div class="modal-header">
												<button type="button" class="close" data-dismiss="modal">X</button>
												<h4 class="modal-title">Confirmación</h4>
											</div>
											<div class="modal-body">
													<h3>Seleccione los elementos que quiere dar de baja si solo selecciono un equipo. En el caso de haber seleccionado más de un equipo a cada elemento de cada equipo solo se le quitara la asosiación a dicho equipo.</h3>
													<p:dataTable var="ele" value="#{adminBean.tipoElementos}" rowKey="#{ele}" selection="#{adminBean.elementosSeleccionadoPorEquipo}">
														<p:column headerText="Tipo">
															<h:outputText value="#{ele}"/>
														</p:column>
														<p:column selectionMode="multiple" style="text-align: center" />
													</p:dataTable>
												<h:commandButton styleClass="btn btn-default btn-success" value="Confirmar" action="#{adminBean.eliminarEquipos()}"/>
												<button type="button" class="btn btn-default btn-danger" data-dismiss="modal">Cancelar</button>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
											</div>
										</div>
									</c:if>

									<c:if test="#{adminBean.listaEquiposSeleccionados.size()==1}">
										<!-- Modal content-->
										<div class="modal-content">
											<div class="modal-header">
												<button type="button" class="close" data-dismiss="modal">X</button>
												<h4 class="modal-title">Confirmación</h4>
											</div>
											<div class="modal-body">
												<h3>¿Desea dar de baja a los equipos?</h3>
												<h:commandButton styleClass="btn btn-default btn-success" value="Confirmar" action="#{adminBean.eliminarEquipos()}"/>
												<button type="button" class="btn btn-default btn-danger" data-dismiss="modal">Cancelar</button>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
											</div>
										</div>
									</c:if>

									

								</div>
							</div>

							<h:commandLink style="float: right; color:white;" value="Recargar" action="#{adminBean.recargar()}" styleClass="btn btn-default btn-info" />
						</f:facet>
					</p:dataTable>
				</p:fieldset>
			</h:form>
			<h:form>
				<i class="fas fa-download"></i><h:commandButton value="Descargar" styleClass="btn btn-default" action="#{adminBean.esportarExcel()}"/>
			</h:form>
		</div>
	</div>

	<div class="collapse container col-xs-12" id="laboratorios">
		<div class="container">
			<div class="row" id="registroLaboratorio">
				<h1>Registrar Laboratorio</h1>
				<h:form>
					<div class="">
						<div class="form-group col-xs-12">
							<h:outputLabel for="equiposLaboratorio" value="Selecciones los equipos: "/>
							<p:selectCheckboxMenu id="equiposLaboratorio"
												  value="#{adminBean.listaEquiposRegistrarLaboratorio}"
												  label="Equipos" multiple="true"
												  filter="true"
												  filterMatchMode="startsWith">
								<f:selectItems value="#{adminBean.listaEquiposActivos}"
											   var="equipo"
											   itemLabel="Sistemas#{equipo.id}"
											   itemValue="#{equipo.id}" />
							</p:selectCheckboxMenu>
						</div>
						<div class="form-group col-xs-12">
							<h:outputLabel for="registroNombreLaboratorio" value="Nombre: "/>
							<h:inputText value="#{adminBean.nombreLaboratorio}" id="registroNombreLaboratorio"/>
						</div>

						<p:commandButton process="@parent"
										 ajax="true"
										 onerror="mensajeError('no se ha podido registrar el laboratorio')"
										 onsuccess="mensajeCorrecto('El laboratorio se ha registrado correctamente')"
										 icon="fa fa-check" styleClass="btn btn-default btn-success"
										 value="Requistrar"
										 action="#{adminBean.registrarLaboratorio()}">
							<f:ajax onevent="comprobar"/>
						</p:commandButton>
					</div>
				</h:form>
			</div>
			<hr/>
			<div class="row">
				<p:fieldset id="tablaLaboratorios" legend="Tabla de Laboratorios">
					<p:dataTable value="#{adminBean.listaLaboratorios}" var="laboratorio">
						<p:column headerText="Nombre">
							<h:outputText value="#{laboratorio.nombre}"/>
						</p:column>
						<p:column headerText="# Equipos">
							<h:outputText value="#{adminBean.consultarNumeroEquipos(laboratorio)}"/>
						</p:column>
						<p:column headerText="Activo">
							<h:outputText value="#{laboratorio.activo}"/>
						</p:column>
						<p:column headerText="Fecha Creación">
							<h:outputText value="#{adminBean.consultarFechaRegistroLaboratorio(laboratorio)}"/>
						</p:column>
						<p:column headerText="Eliminar">
							<button type="button" class="btn btn-default btn-danger btn-block" data-target="#eliminarLaboratorio#{laboratorio.id}" data-toggle="modal">
								Eliminar
							</button>
							<!-- Modal -->
							<div class="modal fade" id="eliminarLaboratorio#{laboratorio.id}" role="dialog">
								<div class="modal-dialog">
									<!-- Modal content-->
									<div class="modal-content">
										<div class="modal-body">
											<h:form>
												<p>¿Desea dar de baja este laboratorio?</p>
												<p:commandButton ajax="true"
																 styleClass="btn btn-default btn-success"
																 value="Si"
																 process="@parent"
																 action="#{adminBean.eliminarLaboratorio(laboratorio)}"
																 onerror="mensajeError('No se ha podido dar de baja el laboratoroi')"
																 onsuccess="mensajeCorrecto('El laboratorio se ha eliminado correctamente')">
													<f:ajax onevent="comprobar"/>
												</p:commandButton>
												<button class="btn btn-default btn-danger" data-dismiss="modal">
													No
												</button>
											</h:form>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default cerrarModal" data-dismiss="modal">Cerrar</button>
										</div>
									</div>
								</div>
							</div>
						</p:column>
						<f:facet name="footer">
							<form>
								<h:commandButton style="color:white;" value="Recargar" action="#{adminBean.recargar()}" styleClass="btn btn-default btn-info" />
							</form>
						</f:facet>
					</p:dataTable>
				</p:fieldset>
				<h:form>
					<i class="fas fa-download"></i><h:commandLink value="Descargar" action="#{adminBean.importarTablaLaboratorios()}" styleClass="btn btn-default"/>
				</h:form>
			</div>
			<hr/>
			<div class="row col-xs-12 col-md-6">
				<canvas id="equiposPorLaboratorio"/>
			</div>
			<div class="row col-xs-12 col-md-6">
				<canvas id="eliminadosLaboratorio"/>
			</div>
		</div>
	</div>

	<div class="collapse container col-xs-12" id="novedades">

		<div class="container">
			<div class="row">
				<h1>REGISTRAR NOVEDAD</h1>
				<br/>
				<button data-target="#modalRequistrarNovedadElemento" data-toggle="modal" class="btn btn-default">Novedad Elemento</button>
				<button data-target="#modalRegistrarNovedadEquipo" data-toggle="modal" class="btn btn-default">Novedad Equipo</button>
				<!-- Modal -->
				<div class="modal fade" id="modalRequistrarNovedadElemento" role="dialog">
					<div class="modal-dialog">
						<!-- Modal content-->
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close cerrarModal" data-dismiss="modal">X</button>
								<h4 class="modal-title">Registrar Novedad Elementos</h4>
							</div>
							<div class="modal-body">
								<h:form>
									<h:outputLabel for="registrarNovedadElemento" value="Seleccione el elemento: "/>
									<h:selectOneMenu id="registrarNovedadElemento" value="#{adminBean.novedadElemento}">
										<f:selectItems value="#{adminBean.listaElementos}" var="elemento" itemLabel="#{elemento.id}" itemValue="#{elemento.id}"/>
									</h:selectOneMenu>
									<h:outputLabel for="registrarNovedadElementoTitulo" value="Escriba el título de la novedad: "/>
									<h:inputText id="registrarNovedadElementoTitulo" value="#{adminBean.tituloRegistrarNovedad}"/>
									<h:outputLabel for="registrarNovedadElementoDetalle" value="Escriba el detalle de la novedad: "/>
									<h:inputTextarea id="registrarNovedadElementoDetalle" value="#{adminBean.detalleRegistrarNovedad}" />
									<p:commandButton id="registrarNovedadElementoBoton" process="@parent" onsuccess="mensajeCorrecto('Se ha registrado la novedad correctamente')" onerror="mensajeError('No se pudo registrar la novedad')" ajax="true" styleClass="btn btn-default btn-success" value="Registrar" action="#{adminBean.registrarNovedadElemento()}">
										<f:ajax onevent="comprobar"/>
									</p:commandButton>
								</h:form>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default cerrarModal" data-dismiss="modal">Cerrar</button>
							</div>
						</div>
					</div>
				</div>
				<!-- Modal -->
				<div class="modal fade" id="modalRegistrarNovedadEquipo" role="dialog">
					<div class="modal-dialog">
						<!-- Modal content-->
						<div class="modal-content">
							<div class="modal-header">
								<button type="button" class="close cerrarModal" data-dismiss="modal">X</button>
								<h4 class="modal-title">Registrar Novedad Equipos</h4>
							</div>
							<div class="modal-body">
								<h:form>
									<h:form>
										<h:outputLabel for="registrarNovedadElemento" value="Seleccione el elemento: "/>
										<h:selectOneMenu id="registrarNovedadElemento" value="#{adminBean.novedadElemento}">
											<f:selectItems value="#{adminBean.listaElementos}" var="elemento" itemLabel="#{elemento.id}" itemValue="#{elemento.id}"/>
										</h:selectOneMenu>
										<h:outputLabel for="registrarNovedadElementoTitulo" value="Escriba el título de la novedad: "/>
										<h:inputText id="registrarNovedadElementoTitulo" value="#{adminBean.tituloRegistrarNovedad}"/>
										<h:outputLabel for="registrarNovedadElementoDetalle" value="Escriba el detalle de la novedad: "/>
										<h:inputTextarea id="registrarNovedadElementoDetalle" value="#{adminBean.detalleRegistrarNovedad}" />
										<h:outputLabel for="registrarNovedadAjuste" value="Seleccione el tipo de ajuste: "/>
										<h:selectOneMenu id="registrarNovedadAjuste" value="#{adminBean.novedadAjuste}">
											<f:selectItem itemLabel="Eliminar" itemValue="novedadEliminar"/>
											<f:selectItem itemLabel="Modificar" itemValue="novedadModificar"/>
										</h:selectOneMenu>
										<p:commandButton id="registrarNovedadElementoBoton" process="@parent" onsuccess="mensajeCorrecto('Se ha registrado la novedad correctamente')" onerror="mensajeError('No se pudo registrar la novedad')" ajax="true" styleClass="btn btn-default btn-success" value="Registrar" action="#{adminBean.registrarNovedadElemento()}">
											<f:ajax onevent="comprobar"/>
										</p:commandButton>
									</h:form>
								</h:form>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default cerrarModal" data-dismiss="modal">Cerrar</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			<hr/>
			<div class="row">
				<p:fieldset id="tablaNovedades" legend="Tabla de Laboratorios">
					<p:dataTable value="#{adminBean.listaNovedades}"
								 var="novedad"
								 paginator="true"
								 rows="10"
								 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}"
								 rowKey="#{elemento.id}">
						<p:column headerText="Tipo">
							<h:outputText value="#{novedad.tipo}"/>
						</p:column>
						<p:column headerText="# Elemento/Equipo">
							<h:outputText value="#{novedad.equipo==null?novedad.elemento.id:novedad.equipo.id}"/>
						</p:column>
						<p:column headerText="Usuario">
							<h:outputText value="#{novedad.usuario}"/>
						</p:column>
						<p:column headerText="Fecha">
							<h:outputText value="#{novedad.fecha}"/>
						</p:column>

						<f:facet name="footer">
							<form>
								<h:commandButton style="color:white;" value="Recargar" action="#{adminBean.recargar()}" styleClass="btn btn-default btn-info" />
							</form>
						</f:facet>
						<h:form>
							<i class="fas fa-download"></i><h:commandLink value="Descargar" action="#{adminBean.importarTablaNovedades()}" styleClass="btn btn-default"/>
						</h:form>
					</p:dataTable>
				</p:fieldset>
			</div>
		</div>

	</div>


	<!-- MODALES -->

	<ui:repeat var="elemento" value="#{adminBean.listaElementos}">
		<!-- Modal -->
		<div class="modal fade" id="configurarElementoModal#{elemento.id}" role="dialog">
			<div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close cerrarModal" data-dismiss="modal">X</button>
						<h4 class="modal-title">Configuración Elemento #{elemento.id}</h4>
					</div>
					<div class="modal-body">
						
						<div class="row col-xs-12">
							<nav class="navbar navbar-inverse">
								<div class="container-fluid">
									<div class="navbar-header">
										<button type="button" class="navbar-toggle" data-target="#myNavbar">
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
										</button>
									</div>
									<div class="collapse navbar-collapse" id="myNavbarCambioElementosModal">
										<ul class="nav navbar-nav">
											<li id="botonConfigurarIDElemento" data-toggle="collapse" data-target="#configurarIDModal#{elemento.id}" class="active botonMenuConfiguracion"><a href="#">ID</a></li>

											<li id="botonConfigurarNombreElemento" data-toggle="collapse" data-target="#configurarNombreModal#{elemento.id}" class="botonMenuConfiguracion"><a href="#">NOMBRE</a></li>

										</ul>
									</div>
								</div>
							</nav>
						</div>
						<div class="in collapse collapseConfiguracion container-fluid" id="configurarIDModal#{elemento.id}">
							<h:form>
							    <h:panelGrid class="col-xs-12" columns="2" cellpadding="5">
									<h:outputText value="Nuevo ID para #{elemento.id}:"/>
									<h:inputText required="true" id="idElementoCambio" value="#{adminBean.cambioIDElemento}"/>
							    </h:panelGrid>
								
							 
							    <p:commandButton process="@parent" ajax="true" onsuccess="mensajeCorrecto('El ID se ha modificado correctamente')" onerror="mensajeError('No se ha podido modificar el ID')" action="#{adminBean.CambiarIDElemento(elemento)}" styleClass="btn btn-default btn-success" value="Cambiar" >
							    	<f:ajax onevent="comprobar"/>
							    </p:commandButton>
								

							</h:form>
						</div>
						<div class="collapse collapseConfiguracion container-fluid" id="configurarNombreModal#{elemento.id}">
							<h:form>
							    <h:panelGrid columns="2">
									<h:outputText value="Nuevo Nombre:"/>
									<p:inputText id="nombreElementoCambio" required="true" value="#{adminBean.cambioNombreElemento}"/>
								</h:panelGrid>
								<p:commandButton process="@parent" ajax="true" onsuccess="mensajeCorrecto('El nombre se ha modificado correctamente')" onerror="mensajeError('No se ha podido modificar el ID')" styleClass="btn btn-default btn-success btn-block" value="Cambiar" action="#{adminBean.cambiarNombreElemento(elemento)}">
									<f:ajax onevent="comprobar"/>
								</p:commandButton>
							</h:form>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default cerrarModal" data-dismiss="modal">Cerrar</button>
					</div>
				</div>
			</div>
		</div>


		<!-- Modal -->
		<div class="modal fade" id="novedadElemento#{elemento.id}" role="dialog">
			<div class="modal-dialog">
				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close cerrarModal" data-dismiss="modal">X</button>
						<h4 class="modal-title">Novedades del elemento #{elemento.id}</h4>
					</div>
					<div class="modal-body">

					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default cerrarModal" data-dismiss="modal">Cerrar</button>
					</div>
				</div>
			</div>
		</div>


		<!-- MODAL -->
		<div class="modal fade" id="botonEnlazarEquipoModal#{elemento.id}" role="dialog">
			<div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">

						<h4 class="modal-title">Enlazar equipo al elemento <h:outputText id="enlazarEquipoModal" value="#{elemento.nombre}"/> </h4>
					</div>
					<div class="modal-body">
						<h:form id="formularioEnlazarElemento">
							<div class="row" style="padding:25px;">
								<p:outputLabel class="col-xs-12 col-md-6" value="Seleccionar Equipo"/>
								<h:selectOneMenu style="" dynamic="true" class="col-xs-12 col-md-6" id="equipoAsociar" value="#{adminBean.equipo}">
									<f:selectItems var="equipo" value="#{adminBean.listaEquiposActivos}" itemValue="#{equipo.id}" itemLabel="Sistemas#{equipo.id}"/>
								</h:selectOneMenu>
								<hr class="col-xs-11"/>
								<p:commandButton ajax="true" onsuccess="mensajeCorrecto('El elemento ha sido enlazado!')" onerror="mensajeError('No es posible enlazar el elemento!')" process="@parent" id="formularioEnlazarElemento" action="#{adminBean.enlazarElemento(elemento)}" styleClass="btn btn-default btn-success btn-responsive btn-block" value="Enlazar" >
									<f:ajax  onevent="comprobar"/>
								</p:commandButton>
							</div>
						</h:form>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					</div>
				</div>

			</div>
		</div>
	</ui:repeat>



	

	


	



	
	<!-- EQUIPOS -->
	<ui:repeat var="equipo" value="#{adminBean.listaEquipos}">
		<!-- Modal -->
		<div class="modal fade" id="novedadEquipo#{equipo.id}" role="dialog">
			<div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal">X</button>
						<h4 class="modal-title">Información novedades equipo #{equipo.id}</h4>
					</div>
					<div class="modal-body">
						
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
					</div>
				</div>

			</div>
		</div>

		<!-- Modal -->
		<div class="modal fade" id="configurarEquipo#{equipo.id}" role="dialog">
			<div class="modal-dialog">

				<!-- Modal content-->
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close cerrarModal" data-dismiss="modal">X</button>
						<h4 class="modal-title">Configuración Equipo Sistemas#{equipo.id}</h4>
					</div>
					<div class="modal-body">
						<div class="row col-xs-12">
							<nav class="navbar navbar-inverse">
								<div class="container-fluid">
									<div class="navbar-header">
										<button type="button" class="navbar-toggle" data-target="#myNavbar">
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
											<span class="icon-bar"></span>
										</button>
									</div>
									<div class="collapse navbar-collapse" id="myNavbarCambioElementos">
										<ul class="nav navbar-nav">
											<li id="botonConfigurarTeclado" data-toggle="collapse" data-target="#configurarTeclado#{equipo.id}" class="active botonMenuConfiguracion"><a href="#">Teclado</a></li>

											<li id="botonConfigurarTorre" data-toggle="collapse" data-target="#configurarTorre#{equipo.id}" class="botonMenuConfiguracion"><a href="#">Torre</a></li>

											<li id="botonConfigurarMouse" data-toggle="collapse" data-target="#configurarMouse#{equipo.id}" class="botonMenuConfiguracion"><a href="#">Mouse</a></li>

											<li id="botonConfigurarMonitor" data-toggle="collapse" data-target="#configurarMonitor#{equipo.id}" class="botonMenuConfiguracion"><a href="#">Monitor</a></li>

											<li id="botonConfigurarLaboratorio" data-toggle="collapse" data-target="#configurarLaboratorio#{equipo.id}" class="botonMenuConfiguracion"><a href="#">Laboratorio</a></li>

										</ul>
									</div>
								</div>
							</nav>
						</div>
						<div class="collapse collapseConfiguracion container-fluid in" id="configurarTeclado#{equipo.id}">
							<h:form>
								<h:outputText value="Seleccione el teclado:"/>
								<h:selectOneMenu value="#{adminBean.tecladoSeleccionado}">
									<f:selectItems itemValue="#{teclado.id}" itemLabel="#{teclado.id}" var="teclado" value="#{adminBean.consultarElementosDisponibles(adminBean.teclado)}"/>
								</h:selectOneMenu>
								<p:commandButton process="@parent" ajax="true" onsuccess="mensajeCorrecto('Se ha cambiado el teclado correctamente')" onerror="mensajeError('No se ha podido cambiar el teclado')" value="Cambiar" styleClass="btn btn-default btn-success" action="#{adminBean.actualizarTecladoDeEquipo(equipo)}">
									<f:ajax onevent="comprobar"/>
								</p:commandButton>
							</h:form>
						</div>
						<div class="collapse collapseConfiguracion container-fluid" id="configurarTorre#{equipo.id}">
							<h:form>
								<h:outputText value="Seleccione la torre:"/>
								<h:selectOneMenu value="#{adminBean.torreSeleccionada}">
									<f:selectItems itemValue="#{torre.id}" itemLabel="#{torre.id}" var="torre" value="#{adminBean.consultarElementosDisponibles(adminBean.torre)}"/>
								</h:selectOneMenu>
								<p:commandButton process="@parent" onsuccess="mensajeCorrecto('Se ha cambiado la torre correctamente')" onerror="mensajeError('No se ha podido cambiar la torre')" value="Cambiar" styleClass="btn btn-default btn-success" action="#{adminBean.actualizarTorreDeEquipo(equipo)}">
									<f:ajax onevent="comprobar"/>
								</p:commandButton>
							</h:form>
						</div>
						<div class="collapse collapseConfiguracion container-fluid" id="configurarMouse#{equipo.id}">
							<h:form>
								<h:outputText value="Seleccione el mouse:"/>
								<h:selectOneMenu value="#{adminBean.mouseSeleccionado}">
									<f:selectItems itemValue="#{mouse.id}" itemLabel="#{mouse.id}" var="mouse" value="#{adminBean.consultarElementosDisponibles(adminBean.mouse)}"/>
								</h:selectOneMenu>
								<p:commandButton process="@parent" onsuccess="mensaCorrecto('El mouse se ha cambiado correctamente')" onerror="mensajeError('No se ha podido cambiar el mouse')" value="Cambiar" styleClass="btn btn-default btn-success" action="#{adminBean.actualizarMouseDeEquipo(equipo)}">
									<f:ajax onevent="procesando"/>
								</p:commandButton>
							</h:form>
						</div>
						<div class="collapse collapseConfiguracion container-fluid" id="configurarMonitor#{equipo.id}">
							<h:form>
								<h:outputText value="Seleccione el monitor:"/>
								<h:selectOneMenu value="#{adminBean.monitorSeleccionado}">
									<f:selectItems itemValue="#{monitor.id}" itemLabel="#{monitor.id}" var="monitor" value="#{adminBean.consultarElementosDisponibles(adminBean.monitor)}"/>
								</h:selectOneMenu>
								<p:commandButton process="@parent" onsuccess="mensajeCorrecto('El monitor se ha cambiado correctamente')" onerror="mensajeError('No se ha podido cambiar el monitor')" value="Cambiar" styleClass="btn btn-default btn-success" action="#{adminBean.actualizarTecladoDeEquipo(equipo)}">
									<f:ajax onevent="comprobar"/>
								</p:commandButton>
							</h:form>
						</div>
						<div class="collapse collapseConfiguracion container-fluid" id="configurarLaboratorio#{equipo.id}">
							<h:form>
								<h:outputText value="Seleccione el laboratorio:"/>
								<h:selectOneMenu value="#{adminBean.laboratorioSeleccionado}">
									<f:selectItems itemValue="#{laboratorio.id}" itemLabel="#{laboratorio.nombre}" var="laboratorio" value="#{adminBean.laboratoriosDisponibles()}"/>
								</h:selectOneMenu>
								<p:commandButton process="@parent" onsuccess="mensajeCorrecto('Se ha cambiado el laboratorio correctamente')" onerror="mensajeError('No se ha podido cambiar el laboratorio')" value="Cambiar" styleClass="btn btn-default btn-success" action="#{adminBean.actualizarLaboratorioDeEquipo(equipo)}">
									<f:ajax onevent="comprobar"/>
								</p:commandButton>
							</h:form>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-default cerrarModal" data-dismiss="modal">Cerrar</button>
					</div>
				</div>
			</div>
		</div>



	</ui:repeat>







	<!-- Modal -->
	<div class="modal fade" id="modalCargando" role="dialog">
		<div class="modal-dialog">

			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-body">
					<center>
						<img class="img-circle img-responsive" src="../img/cargando.gif" alt=""/>
					</center>
				</div>
			</div>

		</div>
	</div>
	<script>
	  var ctx = document.getElementById("equiposPorLaboratorio").getContext('2d');
	  var myChart = new Chart(ctx, {
		type: 'bar',
		data: {
		  //labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
		  labels: [#{adminBean.imprimirListaLaboratorios()}],
		  datasets: [{
			label: '# Equipos por Laboratorio',
			data: [#{adminBean.imprimirNumeroEquiposLaboratorios()}],
			backgroundColor: [
			  'rgba(255, 99, 132, 0.2)',
			  'rgba(54, 162, 235, 0.2)',
			  'rgba(255, 206, 86, 0.2)',
			  'rgba(75, 192, 192, 0.2)',
			  'rgba(153, 102, 255, 0.2)',
			  'rgba(255, 159, 64, 0.2)'
			],
			borderColor: [
			  'rgba(255,99,132,1)',
			  'rgba(54, 162, 235, 1)',
			  'rgba(255, 206, 86, 1)',
			  'rgba(75, 192, 192, 1)',
			  'rgba(153, 102, 255, 1)',
			  'rgba(255, 159, 64, 1)'
			],
			borderWidth: 1
		  }]
		},
		options: {
		  scales: {
			yAxes: [{
			  ticks: {
				beginAtZero: true
			  }
			}]
		  }
		}
	  });


	  var ctx = document.getElementById("eliminadosLaboratorio").getContext('2d');
	  var myChart = new Chart(ctx, {
		type: 'bar',
		data: {
		  //labels: ["Red", "Blue", "Yellow", "Green", "Purple", "Orange"],
		  labels: [#{adminBean.imprimirListaLaboratorios()}],
		  datasets: [{
			label: '# Equipos eliminados por Laboratorio',
			data: [#{adminBean.imprimirEquiposEliminadosLaboratorio()}],
			backgroundColor: [
			  'rgba(255, 99, 132, 0.2)',
			  'rgba(54, 162, 235, 0.2)',
			  'rgba(255, 206, 86, 0.2)',
			  'rgba(75, 192, 192, 0.2)',
			  'rgba(153, 102, 255, 0.2)',
			  'rgba(255, 159, 64, 0.2)'
			],
			borderColor: [
			  'rgba(255,99,132,1)',
			  'rgba(54, 162, 235, 1)',
			  'rgba(255, 206, 86, 1)',
			  'rgba(75, 192, 192, 1)',
			  'rgba(153, 102, 255, 1)',
			  'rgba(255, 159, 64, 1)'
			],
			borderWidth: 1
		  }]
		},
		options: {
		  scales: {
			yAxes: [{
			  ticks: {
				beginAtZero: true
			  }
			}]
		  }
		}
	  });

	</script>
</h:body>
<footer>

</footer>


<!--JS personalizados -->
<script src="../js/admin.js"></script>
</html>