<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">
<h:head>
	<link rel="stylesheet" type="text/css" href="../css/plugins/bootstrap.min.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="../css/plugins/bootstrap-theme.min.css" media="screen"/>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous"/>
    
    <link rel="stylesheet" type="text/css" href="../css/admin.css" media="screen"/>
    
    
    <!-- JS plugins -->
    <script src="../js/plugins/bootstrap.min.js"></script>

	
</h:head>
<h:body>
	<div class="container">
		<div class="header container-fluid">
			<div class="row col-xs-12 col-md-6">
				<h1 class="titulo col-xs-12">Historial de Laboratorios</h1>
				<h:outputLabel class="titulo tituloNombre col-xs-12">Bienvenido: <h:outputText value="#{sessionScope.correo}"/></h:outputLabel>

			</div>
			<div class="row col-xs-12 col-md-6" id="divLogo">
				<img id="logo" class="img img-responsive col-xs-12" src="https://www.escuelaing.edu.co/uploads/descargables/1110_logotipo_institucional_vm300px.png"/>
			</div>
		</div>
		<div class="row col-xs-12">
			<nav class="navbar navbar-inverse">
				<div class="container-fluid">
					<div class="navbar-header">
						<button type="button" class="navbar-toggle" data-target="#myNavbar">
							<span class="icon-bar"></span>
					        <span class="icon-bar"></span>
					        <span class="icon-bar"></span> 
						</button>
					</div>
					<div class="collapse navbar-collapse" id="myNavbar">
						<ul class="nav navbar-nav">
							<li id="botonElementos" data-toggle="collapse" data-target="#elementos" class="active botonMenu"><a href="#">Elementos</a></li>

							<li id="botonEquipos" data-toggle="collapse" data-target="#equipos" class="botonMenu"><a href="#">Equipos</a></li>

							<li id="botonLboratorios" data-toggle="collapse" data-target="#laboratorios" class="botonMenu"><a href="#">Laboratorios</a></li>

							<li id="botonNovedades" data-toggle="collapse" data-target="#novedades" class="botonMenu"><a href="#">Novedades</a></li>



						</ul>
						<ul class="nav navbar-nav navbar-right">
					        <li> <h:outputLink style="display: inline-block;" value="/logout"><span class=""></span>Salir <i style="color: gray; display: inline-block;" class="fas fa-sign-out-alt"></i></h:outputLink></li>
					      </ul>


					</div>
				</div>
			</nav>
		</div>
	</div>
	<div class="container collapse in" id="elementos">

		<div class="row col-xs-12">
			<h1>Registrar Elemento</h1>
			<hr/>
			<h:form>
			    <p:messages>
			        <p:autoUpdate />
			    </p:messages>
			 
			    <h:panelGrid class="col-xs-12" columns="2" cellpadding="5">
					<p:outputLabel for="idElemento" value="Id del elemento:"/>
					<p:inputText required="true" id="idElemento" value="#{adminBean.idElemento}"/>

					<p:outputLabel for="nombreElemento" value="Nombre del elemento:" />
					<p:inputText required="true" id="nombreElemento" value="#{adminBean.nombreElemento}"/>

			        <p:outputLabel for="tipoElemento" value="Tipo de elemento:" />

					<h:selectOneMenu required="true" id="tipoElemento" value="#{adminBean.tipoSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.tipoElementos}"/>
	                </h:selectOneMenu>
			       	
	
			       <p:outputLabel for="Equipo" value="Equipo:" />
			       <h:selectOneMenu required="true" id="Equipo" value="#{adminBean.equipo}" style="width:196px">
			       		<f:selectItem itemLabel="NULL" itemValue="-1"/>
	                    <f:selectItems value="#{adminBean.getEquiposSelectItem()}"/>
	                </h:selectOneMenu>

			 
			    </h:panelGrid>
				
			 
			    <p:commandButton  action="#{adminBean.registrarElemento()}" icon="fa fa-check" class="btn btn-default btn-success" value="Registrar" />
				

			</h:form>
			
			<hr/>
		</div>
		<div class="row col-xs-12">
			<div class="col-md-12 col-xs-12">
				<h:form>
					<p:fieldset id="tablaElementos" legend="Tabla de elementos">
				        <p:dataTable rowKey="#{elemento.id}" selection="#{adminBean.listaElementosSeleccionados}" id="elementosT" var="elemento" value="#{adminBean.listaElementos}" rows="10" paginator="true"
									 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}" sortBy="#{elemento.id}">
							<p:column selectionMode="multiple" style="text-align:center"/>

				            <p:column sortBy="#{elemento.id}" filterBy="#{elemento.id}" headerText="Id">
				                <h:outputText value="#{elemento.id}" />
				            </p:column>
							<p:column sortBy="#{elemento.nombre}" filterBy="#{elemento.nombre}" headerText="Nombre">
								<h:outputText value="#{elemento.nombre}" />
							</p:column>
				            <p:column sortBy="#{elemento.tipo}" filterBy="#{elemento.tipo}" headerText="Tipo">
				                <h:outputText value="#{elemento.tipo}" />
				            </p:column>
							<p:column sortBy="#{adminBean.consultarEquipoDeElemento(elemento)}" filterBy="#{adminBean.consultarEquipoDeElemento(elemento)}" headerText="Equipo">
								<h:outputText value="#{adminBean.consultarEquipoDeElemento(elemento)}"/>
							</p:column>
							<p:column sortBy="#{elemento.activo}" filterBy="#{elemento.activo}" headerText="Activo">
								<h:outputText value="#{elemento.activo}"/>
							</p:column>

							<p:column headerText="Novedades">
								<center>
									<button type="button" data-toggle="modal" data-target="#novedadElemento#{elemento.id}" class="btn btn-default btn-info">
										VER
									</button>
								</center>
								<!-- Modal -->
								<div class="modal fade" id="novedadElemento#{elemento.id}" role="dialog">
									<div class="modal-dialog">

										<!-- Modal content-->
										<div class="modal-content">
											<div class="modal-header">
												<button type="button" class="close" data-dismiss="modal">X</button>
												<h4 class="modal-title">Confirmación</h4>
											</div>
											<div class="modal-body">

											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
											</div>
										</div>

									</div>
								</div>
							</p:column>
							<f:facet name="footer">
								<button type="button" data-toggle="modal" data-target="#modalConfirmacion" class="btn btn-default btn-danger">
										Eliminar
								</button>

								<div class="modal fade" id="modalConfirmacion" role="dialog">
									<div class="modal-dialog">

										<!-- Modal content-->
										<div class="modal-content">
											<div class="modal-header">
												<button type="button" class="close" data-dismiss="modal">X</button>
												<h4 class="modal-title">Confirmación</h4>
											</div>
											<div class="modal-body">
												<p>¿Quiere dar de baja los elementos seleccionados?.</p>
												<h:commandButton action="#{adminBean.eliminarElementos()}" process="elementosT" value="SI" styleClass="btn btn-default btn-success"/>
												<button class="btn btn-default btn-danger" type="button" data-dismiss="modal">NO</button>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
											</div>
										</div>

									</div>
								</div>

							</f:facet>
				        </p:dataTable>
				    </p:fieldset>
				</h:form>
				<h:form>
					<i class="fas fa-download"></i><h:commandButton action="#{adminBean.exportarElementos()}" value="Descargar" styleClass="btn btn-default" />
				</h:form>

				<hr/>
			</div>
		</div>
		<div class="row col-xs-12">
			<div class="col-md-12 col-xs-12">
				<h:form id="formElementosDisponibles">
					<p:fieldset id="tablaElementosDisponibles" legend="Tabla de elementos disponibles">
				        <p:dataTable sortBy="#{elemento.id}" id="elementosTabla" var="elemento" value="#{adminBean.listaElementosDisponibles}" rows="10" paginator="true"
									 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}">
				 
				            <p:column sortBy="#{elemento.id}" filterBy="#{elemento.id}" headerText="Id">
				                <h:outputText value="#{elemento.id}" />
				            </p:column>

							<p:column sortBy="#{elemento.nombre}" filterBy="#{elemento.nombre}" headerText="Nombre">
								<h:outputText value="#{elemento.nombre}" />
							</p:column>
				 
				            <p:column sortBy="#{elemento.tipo}" filterBy="#{elemento.tipo}" headerText="Tipo">
				                <h:outputText value="#{elemento.tipo}" />
				            </p:column>
							<p:column headerText="Enlazar">
								<center>
									<button data-toggle="modal" data-target="#botonEnlazarEquipo#{elemento.id}" type="button" class="btn btn-default btn-responsive btn-primary"><i class="fas fa-star"></i>Enlazar equipo</button>
								</center>
								<div class="modal fade" id="botonEnlazarEquipo#{elemento.id}" role="dialog">
									<div class="modal-dialog">

										<!-- Modal content-->
										<div class="modal-content">
											<div class="modal-header">

												<h4 class="modal-title">Enlazar equipo al elemento</h4>
											</div>
											<div class="modal-body">
												<h:form class="container-fluid" id="formularioEnlazarElemento#{elemento.id}">
													<p:messages>
														<p:autoUpdate />
													</p:messages>
													<div class="row" style="padding:25px;">
														<p:outputLabel class="col-xs-12 col-md-6" value="Elemento"/>
														<input type="text" class="col-xs-12 col-md-6" value="#{elemento.id}" disabled="disabled"/>
														<hr/>
														<p:outputLabel class="col-xs-12 col-md-6" value="Seleccionar Equipo"/>
														<h:selectOneMenu style="" dynamic="true" class="col-xs-12 col-md-6" id="equipoAsociar#{elemento.id}" value="#{adminBean.equipo}">
															<f:selectItems var="equipo" value="#{adminBean.listaEquipos}" itemValue="#{equipo.id}" itemLabel="#{equipo.id}"/>
														</h:selectOneMenu>
														<hr class="col-xs-11"/>
														<h:commandButton  action="#{adminBean.enlazarElemento(elemento)}" class="btn btn-default btn-success btn-responsive col-xs-12 col-md-12" value="Enlazar" />
													</div>
												</h:form>
											</div>
											<div class="modal-footer">
												<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
											</div>
										</div>

									</div>
								</div>
							</p:column>
				        </p:dataTable>
				    </p:fieldset>
				</h:form>
			</div>
		</div>
	</div>

	<div class="container col-xs-12 collapse" id="equipos">
		<div class="container">

			<h:form>
				<p:messages>
			        <p:autoUpdate />
			    </p:messages>

			    <h:panelGrid class="col-xs-12" columns="2" cellpadding="5">
			    	<p:outputLabel for="laboratorio" value="Laboratorio:" />
			    	<h:selectOneMenu id="laboratorio" value="#{adminBean.laboratorioSeleccionado}" style="width:196px">
			    	<f:selectItem itemLabel="NULL" itemValue="-1"/>
	                    <f:selectItems  value="#{adminBean.laboratoriosDisponibles()}" var="laboratorio" itemLabel="#{laboratorio.nombre}" itemValue="#{laboratorio.id}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="monitor" value="Monitor:" />
			    	<h:selectOneMenu id="monitor" value="#{adminBean.monitorSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.monitoresDisponibles()}" var="monitor" itemLabel="#{monitor.nombre}" itemValue="#{monitor.id}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="mouse" value="Mouse:" />
			    	<h:selectOneMenu id="mouse" value="#{adminBean.mouseSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.mousesDisponibles()}" var="mouse" itemLabel="#{mouse.nombre}" itemValue="#{mouse.id}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="torre" value="Torre:" />
			    	<h:selectOneMenu id="torre" value="#{adminBean.torreSeleccionada}" style="width:196px">
	                    <f:selectItems value="#{adminBean.torresDisponibles()}" var="torre" itemValue="#{torre.id}" itemLabel="#{torre.nombre}"/>
	                </h:selectOneMenu>


	                <p:outputLabel for="teclado" value="Teclado:" />
			    	<h:selectOneMenu id="teclado" value="#{adminBean.tecladoSeleccionado}" style="width:196px">
	                    <f:selectItems value="#{adminBean.tecladosDisponibles()}" var="teclado" itemLabel="#{teclado.nombre}" itemValue="#{teclado.id}"/>
	                </h:selectOneMenu>
				</h:panelGrid>

				<p:commandButton  action="#{adminBean.registrarEquipo()}" icon="fa fa-check" class="btn btn-default btn-success" value="Registrar" />
			</h:form>
			<hr/>
		</div>
		<div class="container">
			<h:form id="formEquipos">
				<p:fieldset id="tablaEquipos" legend="Tabla de equipos">
					<p:dataTable rowKey="#{equipo.id}" selection="#{adminBean.equipoSeleccionado}" sortBy="#{equipo.id}" id="equiposTabla" var="equipo" value="#{adminBean.listaEquipos}" rows="10" paginator="true"
								 paginatorTemplate="{PreviousPageLink} {PageLinks} {NextPageLink} {RowsPerPageDropdown}">
						<p:column selectionMode="single" style="text-align: center" />
						<p:column sortBy="#{equipo.id}" filterBy="#{equipo.id}" headerText="Id">
							<h:outputText value="#{equipo.id}"/>
						</p:column>
						<p:column headerText="Nombre">
							<h:outputText value="Sistemas#{equipo.id}"/>
						</p:column>
						<p:column sortBy="#{equipo.activo}" filterBy="#{equipo.activo}" headerText="Activo">
							<h:outputText value="#{equipo.activo}" />
						</p:column>
						<p:column sortBy="#{adminBean.consultarLaboratorio(equipo).id}" filterBy="#{adminBean.consultarLaboratorio(equipo).id}" headerText="Laboratorio">
							<h:outputText value="#{adminBean.consultarLaboratorio(equipo).id}" />
							<!--<button type="button" data-toggle="modal" data-target="#cambiarLaboratorioModal#{equipo.id}" class="btn btn-default btn-info btn-block col-xs-12">Cambiar</button>
							<div class="modal fade" id="cambiarLaboratorioModal#{equipo.id}" role="dialog">
								<div class="modal-dialog">

									<div class="modal-content">
										<div class="modal-header">
											<h4 class="modal-title">CAMBIAR LABORATORIO</h4>
										</div>
										<div class="modal-body">
                                            <h:form>
                                                <div class="form-group">
                                                    <p:outputLabel class="col-xs-6" for="nuevoLaboratorio" value="Seleccione el nuevo laboratorio:"/>
                                                    <h:selectOneMenu class="col-xs-6" id="nuevoLaboratorio" value="#{adminBean.laboratorioSeleccionado}">
                                                        <f:selectItems var="laboratorio" value="#{adminBean.laboratoriosDisponibles()}" itemLabel="#{laboratorio.nombre}" itemValue="#{laboratorio.id}" />
                                                    </h:selectOneMenu>
                                                </div>
                                                <h:commandButton class="btn btn-default btn-success btn-block" value="Cambiar" type="button" action="#{adminBean.actualizarLaboratorioDeEquipo(equipo)}" />
                                            </h:form>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
										</div>
									</div>

								</div>
							</div>-->
						</p:column>

						<p:column sortBy="#{adminBean.consultarElementoDelEquipo(adminBean.teclado,equipo)}" filterBy="#{adminBean.consultarElementoDelEquipo(adminBean.teclado,equipo)}" headerText="Teclado">
							<h:outputText value="#{adminBean.consultarElementoDelEquipo(adminBean.teclado,equipo)}"/>

						</p:column>
						<p:column sortBy="#{adminBean.consultarElementoDelEquipo(adminBean.torre,equipo)}" filterBy="#{adminBean.consultarElementoDelEquipo(adminBean.torre,equipo)}" headerText="Torre">
							<h:outputText value="#{adminBean.consultarElementoDelEquipo(adminBean.torre,equipo)}"/>

						</p:column>
						<p:column sortBy="#{adminBean.consultarElementoDelEquipo(adminBean.mouse,equipo)}" filterBy="#{adminBean.consultarElementoDelEquipo(adminBean.mouse,equipo)}" headerText="Mouse">
							<h:outputText value="#{adminBean.consultarElementoDelEquipo(adminBean.mouse,equipo)}"/>

						</p:column>
						<p:column sortBy="#{adminBean.consultarElementoDelEquipo(adminBean.monitor,equipo)}" filterBy="#{adminBean.consultarElementoDelEquipo(adminBean.monitor,equipo)}" headerText="Monitor">
							<h:outputText class="col-xs-12" value="#{adminBean.consultarElementoDelEquipo(adminBean.monitor,equipo)}"/>

						</p:column>

						<p:column headerText="Novedades">
							<center>
								<button style="padding:5px;" type="button" data-toggle="modal" data-target="#novedadEquipo#{equipo.id}" class="btn btn-block btn-default btn-info col-xs-12">VER</button>
							</center>

							<!-- Modal -->
							<div class="modal fade" id="novedadEquipo#{equipo.id}" role="dialog">
								<div class="modal-dialog">

									<!-- Modal content-->
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal">X</button>
											<h4 class="modal-title">Información novedades</h4>
										</div>
										<div class="modal-body">
											
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
										</div>
									</div>

								</div>
							</div>


						</p:column>
						<f:facet name="footer">
							<button class="btn btn-default btn-danger" type="button" data-target="#eliminarEquipos" data-toggle="modal">
								Eliminar
							</button>
							<div class="modal fade" id="eliminarEquipos" role="dialog">
								<div class="modal-dialog">

									<!-- Modal content-->
									<div class="modal-content">
										<div class="modal-header">
											<button type="button" class="close" data-dismiss="modal">X</button>
											<h4 class="modal-title">Confirmación</h4>
										</div>
										<div class="modal-body">
												<h3>Seleccione los elementos que quiere dar de baja</h3>
												<p:dataTable var="ele" value="#{adminBean.tipoElementos}" rowKey="#{ele}" selection="#{adminBean.elementosSeleccionadoPorEquipo}">
													<p:column headerText="Tipo">
														<h:outputText value="#{ele}"/>
													</p:column>
													<p:column selectionMode="multiple" style="text-align: center" />
												</p:dataTable>
											<h:commandButton styleClass="btn btn-default btn-success" value="Confirmar" action="#{adminBean.eliminarEquipos()}" process="tablaEquipos"/>
											<button type="button" class="btn btn-default btn-danger" data-dismiss="modal">Cancelar</button>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
										</div>
									</div>

								</div>
							</div>
						</f:facet>
					</p:dataTable>
				</p:fieldset>
			</h:form>
			<h:form>
				<i class="fas fa-download"></i><h:commandButton value="Descargar" styleClass="btn btn-default" action="#{adminBean.esportarExcel()}"/>
			</h:form>
		</div>
	</div>

	<div class="collapse container col-xs-12" id="laboratorios">
		<div class="container">
			<div class="row" id="registroLaboratorio">
				<h1>Registrar Laboratorio</h1>
				<h:form>
					<p:messages>
						<p:autoUpdate />
					</p:messages>
					<div class="">
						<div class="form-group col-xs-12">
							<h:outputLabel for="equiposLaboratorio" value="Selecciones los equipos: "/>
							<p:selectCheckboxMenu id="equiposLaboratorio" value="#{adminBean.listaEquiposRegistrarLaboratorio}" label="Equipos" multiple="true"
												  filter="true" filterMatchMode="startsWith">
								<f:selectItems value="#{adminBean.listaEquiposActivos}" var="equipo" itemLabel="Sistemas#{equipo.id}" itemValue="#{equipo.id}" />
							</p:selectCheckboxMenu>
						</div>
						<div class="form-group col-xs-12">
							<h:outputLabel for="registroNombreLaboratorio" value="Nombre: "/>
							<h:inputText value="#{adminBean.nombreLaboratorio}" id="registroNombreLaboratorio"/>
						</div>

						<p:commandButton icon="fa fa-check" styleClass="btn btn-default btn-success" value="Requistrar" action="#{adminBean.registrarLaboratorio}"/>
					</div>
				</h:form>
			</div>
			<hr/>
		</div>
	</div>

	<div class="collapse container col-xs-12" id="novedades">

		<div class="container">
			<div class="row">
				<h1>NOVEDADES</h1>
			</div>
		</div>

	</div>


</h:body>
<footer>

</footer>


<!--JS personalizados -->
<script src="../js/admin.js"></script>
</html>